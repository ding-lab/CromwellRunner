# TinDaisy template
# * complete workflow tindaisy.cwl 
# * production optimizations

# No reference- or collection-specific (e.g. CPTAC3) definitons

# Template for TinDaisy YAML input file
# The following arguments must be substituted:
# * NORMAL_BAM
# * TUMOR_BAM
# * REF_PATH
# * PARAM_ROOT -> value is $TD_ROOT/params
# * DBSNP_DB
# * VEP_CACHE_GZ
# * VEP_CACHE_VERSION
# * ASSEMBLY
# * CHRLIST
# * NORMAL_BARCODE
# * TUMOR_BARCODE

normal_bam:
  class: File
  path: ${NORMAL_BAM}
tumor_bam:
  class: File
  path: ${TUMOR_BAM}
reference_fasta:
  class: File
  path: ${REF_PATH}

# barcodes replace "TUMOR" and "NORMAL" as sample names in output MAF 
normal_barcode: ${NORMAL_BARCODE}
tumor_barcode: ${TUMOR_BARCODE}

# vcf (vaf length depth) filter config
pindel_vcf_filter_config:
  class: File
  path: ${PARAM_ROOT}/filter_config/vcf_filter_config-pindel.ini
strelka_vcf_filter_config:
  class: File
  path: ${PARAM_ROOT}/filter_config/vcf_filter_config-strelka.ini
varscan_vcf_filter_config:
  class: File
  path: ${PARAM_ROOT}/filter_config/vcf_filter_config-varscan.ini
mutect_vcf_filter_config:
  class: File
  path: ${PARAM_ROOT}/filter_config/vcf_filter_config-mutect.ini

# Caller config.  Note mutect does not have a caller config file
pindel_config:
  class: File
  path: ${PARAM_ROOT}/caller_config/pindel.WES.ini
strelka_config:
  class: File
  path: ${PARAM_ROOT}/caller_config/strelka.WES.ini
varscan_config:
  class: File
  path: ${PARAM_ROOT}/caller_config/varscan.WES.ini

# Other filter config
classification_filter_config:
  class: File
  path: ${PARAM_ROOT}/filter_config/classification_filter_config.ini
af_filter_config:
  class: File
  path: ${PARAM_ROOT}/filter_config/af_filter_config.ini

# Data files
centromere_bed: 
  class: File
  path: ${PARAM_ROOT}/centromere/ucsc-centromere.GRCh38.bed

# See README.md for discussion of dbSnP references
dbsnp_db:
  class: File
  path: ${DBSNP_DB}

# VEP Cache is used for VEP annotation and vcf_2_maf.
# If not defined, online lookups will be used by VEP annotation. These are slower and do not include allele frequency info (MAX_AF) needed by AF filter.
# For performance reasons, defining vep_cache_gz is suggested for production systems

vep_cache_gz:
  class: File
  path: ${VEP_CACHE_GZ}

vep_cache_version: ${VEP_CACHE_VERSION}
assembly: ${ASSEMBLY}

# no_delete_temp = true preserves intermediate files from pindel run and parse
# no_delete_temp: false

no_delete_temp: false


# Number of parallel jobs to run.  Goal is to balance run times to have a uniform CPU load
num_parallel_strelka2: 4
num_parallel_pindel: 5

chrlist: # Defining this turns on pindel parallel
  class: File
  path: $CHRLIST


### YAML template as generated with cwltool --make-template
# normal_barcode: a_string  # type "string" (optional)
# tumor_barcode: a_string  # type "string" (optional)
# num_parallel_strelka2: 0  # type "int" (optional)
# num_parallel_pindel: 0  # type "int" (optional)
# call_regions:  # type "File" (optional)  -> this doesn't seem to do anything
#     class: File
#     path: a/file/path
# chrlist:  # type "File" (optional)
#     class: File
#     path: a/file/path
# strelka_config:  # type "File"
#     class: File
#     path: a/file/path
# mutect_vcf_filter_config:  # type "File"
#     class: File
#     path: a/file/path
# bypass_classification: false  # type "boolean" (optional)
# bypass_af: false  # type "boolean" (optional)
# classification_filter_config:  # type "File"
#     class: File
#     path: a/file/path
# af_filter_config:  # type "File"
#     class: File
#     path: a/file/path
# varscan_vcf_filter_config:  # type "File"
#     class: File
#     path: a/file/path
# strelka_vcf_filter_config:  # type "File"
#     class: File
#     path: a/file/path
# centromere_bed:  # type "File" (optional)
#     class: File
#     path: a/file/path
# vep_cache_gz:  # type "File" (optional)
#     class: File
#     path: a/file/path
# vep_cache_version: a_string  # type "string" (optional)
# assembly: a_string  # type "string" (optional)
# dbsnp_db:  # type "File" (optional)
#     class: File
#     path: a/file/path
# bypass_dbsnp: false  # type "boolean" (optional)
# bypass_merge: false  # type "boolean" (optional)
# pindel_vcf_filter_config:  # type "File"
#     class: File
#     path: a/file/path
# bypass_depth: false  # type "boolean" (optional)
# bypass_length: false  # type "boolean" (optional)
# bypass_vaf: false  # type "boolean" (optional)
# debug: false  # type "boolean" (optional)
# bypass_homopolymer: false  # type "boolean" (optional)
# bypass_cvs: false  # type "boolean" (optional)
# varscan_config:  # type "File"
#     class: File
#     path: a/file/path
# pindel_config:  # type "File"
#     class: File
#     path: a/file/path
# reference_fasta:  # type "File"
#     class: File
#     path: a/file/path
# normal_bam:  # type "File"
#     class: File
#     path: a/file/path
# tumor_bam:  # type "File"
#     class: File
#     path: a/file/path
# no_delete_temp: false  # type "boolean" (optional)
